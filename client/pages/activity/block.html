<Template name='block'>
  <div class="raiseHands avoidwrap {{raiseHand}}">
      <i class="{{virtualWorkStatus}}"></i>
  </div>
  <div class="block block-{{type}} panel panel-default row">
    <div class="panel-heading">
      <div class="blockSortableHandle {{editing}}">
        {{#if inEditedWall}} 
          <div class="pull-right">
            <a class="glyphicon glyphicon-copy copyBlock" title='Copy to clipboard.  Holding "Ctrl" adds to existing list.'></a>
            {{>showHide collection='Blocks' itemName='block' item=this}}
            {{#unless fileCount}}
              <a class="glyphicon glyphicon-remove deleteBlock" title="Delete Block"></a>
            {{/unless}}
            <i class="icon-raise-virtual-hand-small buttonRaiseVirtualHand"></i>
          </div>
          <div>&nbsp;</div>
        {{else}}
          <div class="buttonRaiseVirtualHand">{{{title}}}</div>
        {{/if}}
      </div>
      <div>
        {{#if inEditedWall}}
          {{>summernote collection='Blocks' field='title' _id=_id enabled=inEditedWall options=summernoteOptions}}
        {{/if}}
      </div>
    </div>
    <div class="panel-body">
      {{> blockType}}
    </div>
    <div class="panel-footer">
      {{#if inEditedWall}}
        <span class="avoidwrap">created 9:30pm 3/29/15  by Matt Greenwolfe, </span>
        <span class="avoidwrap">last modified 10:05am 3/30/15 by Matt Greenwolfe</span>
      {{/if}}
    </div>
  </div>
</Template>

<Template name="textBlock">
  {{>summernote collection='Blocks' field='text' _id=_id enabled=inEditedWall options=summernoteOptions}}
</Template>

<Template name="embedBlock">
  {{#if inEditedWall}}
    Click codeview, &lt;/&gt;, to paste/edit embed code.
  {{/if}}
    {{>summernote collection='Blocks' field='embedCode' _id=_id enabled=inEditedWall options=codeviewOptions}}
  
  {{#if inEditedWall}}
    Add/edit a description.
  {{/if}}
  <p>
    {{>summernote collection='Blocks' field='text' _id=_id enabled=inEditedWall options=summernoteOptions}}
  </p>
</Template>

<Template name="imageBlock">
  {{#if imageFile}} 
    <p>
      <a href="/upload/{{imageFile.path}}"><img src="/upload/{{imageFile.path}}"></a>
    </p> 
  {{/if}}
  {{#if inEditedWall}}
    {{#if imageFile}} 
      {{#with imageFile}}
        {{> deleteImageButton}}
      {{/with}}
    {{else}}
      <p>
        Upload an image file.
        {{>upload_bootstrap fileTypes='image/*' callbacks=processUpload}}
      </p> 
    {{/if}}
  {{/if}}
  <p>
    {{>summernote collection='Blocks' field='text' _id=_id enabled=inEditedWall options=summernoteOptions}}
  </p>
</Template>

<Template name="deleteImageButton">
  <button class="btn btn-warning deleteImageFile">Delete Image</button>
</Template>

<Template name="fileBlock">
  <p>
    {{>summernote collection='Blocks' field='text' _id=_id enabled=inEditedWall options=summernoteOptions}}
  </p>
  {{#sortable1c items=files  options=sortableOpts}} 
    {{>fileLink}}
  {{/sortable1c}}
  {{#if inEditedWall}}
    <p>
      {{>upload_bootstrap callbacks=processUpload}}
    </p> 
  {{/if}}
</Template>

<Template name="fileLink">
  <p class="file">
    {{#if inEditedWall 2}}
      <a class="glyphicon glyphicon-move moveFile" title="move file (within this list only)"></a>
      {{>showHide collection='Files' itemName='file' item=this}}
      <a class="glyphicon glyphicon-remove deleteFile" title="delete file"></a>
    {{/if}}
    <a href="/upload/{{path}}">{{name}}</a> 
  </p> 
</Template>